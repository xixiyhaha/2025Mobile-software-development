<!-- 点歌台首页首页（文件夹列表） -->
<view class="container" style="--theme-color: {{themeColor || '#07c160'}};">
  <!-- 标题 -->
  <view class="header">
    <button class="ddd-btn"></button>
    <text class="title">我的练歌文件夹</text>
  </view>

  <!-- 文件夹列表区域 -->
  <view class="folder-container">
    <!-- 无文件夹时显示 -->
    <view wx:if="{{folderList.length === 0}}" class="empty-tip">
      <icon type="folder" size="60" color="#ccc" />
      <text>还没有文件夹，点击底部按钮新建吧</text>
    </view>

    <!-- 有文件夹时显示列表 -->
    <view wx:else class="folder-list">
      <view wx:for="{{folderList}}" wx:key="folderId" class="folder-item">
        <view 
          class="folder-info" 
          bindtap="enterFolder" 
          data-folderid="{{item.folderId}}"
        >
          <view class="folder-icon">
            <icon type="folder" size="40" color="#FFD700" />
          </view>
          <view class="folder-detail">
            <view class="folder-name">{{item.name}}</view>
            <view class="folder-desc">
              视频: {{(item.videoList && item.videoList.length) || 0}}个 | 
              {{item.audioFileID  ? '已添加伴奏' : '未添加伴奏'}}
            </view>
          </view>
        </view>
        <view class="folder-actions">
          <button 
            class="rename-btn" 
            bindtap="showRenameDialog" 
            data-folderid="{{item.folderId}}"
            data-foldername="{{item.name}}"
          >
            重命名
          </button>
          <button 
            class="delete-btn" 
            bindtap="deleteFolder" 
            data-folderid="{{item.folderId}}"
          >
            删除
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- 新建文件夹对话框 -->
  <view wx:if="{{showCreateDialog}}" class="dialog-mask">
    <view class="dialog-container">
      <view class="dialog-title">新建文件夹</view>
      <input 
        class="dialog-input" 
        placeholder="请输入文件夹名称" 
        value="{{newFolderName}}"
        bindinput="onFolderNameInput"
      />
      <view class="dialog-buttons">
        <button class="dialog-btn cancel" bindtap="hideCreateDialog">
          取消
        </button>
        <button class="dialog-btn confirm" bindtap="confirmCreateFolder">
          {{isParsingVideo ? '处理中...' : '添加'}}
        </button>
      </view>
    </view>
  </view>

  <!-- 重命名文件夹对话框 -->
  <view wx:if="{{showRenameDialog}}" class="dialog-mask">
    <view class="dialog-container">
      <view class="dialog-title">重命名文件夹</view>
      <input 
        class="dialog-input" 
        placeholder="请输入新的文件夹名称" 
        value="{{renameFolderName}}"
        bindinput="onRenameFolderNameInput"
        maxlength="20"
      />
      <view class="dialog-buttons">
        <button class="dialog-btn cancel" bindtap="hideRenameDialog">
          取消
        </button>
        <button class="dialog-btn confirm" bindtap="confirmRenameFolder">
          {{isRenaming ? '修改中...' : '确认修改'}}
        </button>
      </view>
    </view>
  </view>

  <!-- 固定在底部的添加文件夹按钮 -->
  <button 
    class="add-folder-btn" 
    bindtap="showCreateDialog"
  >
    新建文件夹
  </button>
</view>
